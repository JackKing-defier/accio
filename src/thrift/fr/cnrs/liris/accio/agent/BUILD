java_thrift_library(
  name='api',
  sources=['api.thrift'],
  dependencies=[
    'src/thrift/fr/cnrs/liris/accio/api',
    '3rdparty/jvm:scrooge-core',
    '3rdparty/jvm/com/twitter/finagle:thrift',
  ],
  compiler='scrooge',
  language='scala',
  compiler_args=['--finagle'],
)

java_thrift_library(
  name='master',
  sources=['master.thrift'],
  dependencies=[
    'src/thrift/fr/cnrs/liris/accio/api',
    '3rdparty/jvm:scrooge-core',
    '3rdparty/jvm/com/twitter/finagle:thrift',
  ],
  compiler='scrooge',
  language='scala',
  compiler_args=['--finagle'],
)

java_thrift_library(
  name='worker',
  sources=['worker.thrift'],
  dependencies=[
    'src/thrift/fr/cnrs/liris/accio/api',
    '3rdparty/jvm:scrooge-core',
    '3rdparty/jvm/com/twitter/finagle:thrift',
  ],
  compiler='scrooge',
  language='scala',
  compiler_args=['--finagle'],
)


java_thrift_library(
  name='agent',
  sources=['agent.thrift'],
  dependencies=[
    ':api',
    ':worker',
    ':master',
    'src/thrift/fr/cnrs/liris/accio/api',
    '3rdparty/jvm:scrooge-core',
    '3rdparty/jvm/com/twitter/finagle:thrift',
  ],
  compiler='scrooge',
  language='scala',
  compiler_args=['--finagle'],
)
